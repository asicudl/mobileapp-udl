<ion-view class="udlapp-background" ng-init="initList()" view-title="<i class='icon ion-calendar'></i> {{rb.ag_list_title}}" >
    <ion-content ng-show="eventsViewInitialized">
        <ion-refresher
                       pulling-text="{{pullText}}"
                       on-refresh="refreshItems()">
        </ion-refresher>
        <div class="activitiesSeparator"> <i class="icon ion-ribbon-b"></i> {{rb.ag_list_activityTitle}}</div>
        
        <div ng-hide="emptyActivities()">
            <ion-list>
                <a class="activityListItem item udlapp-item item-thumbnail-left" ng-repeat="event in activitiesList  | filter: { published:'true'} | limitTo: !fullEvents ? 2 : activitiesList.length" href="#/app/activityevents/{{event._id}}">
                    <img  src="{{event.image}}" />  
                    <p class="title">{{event.title}}</p>
                    <p class="secondaryInformation"> <i class="icon ion-location"></i> {{event.location}}</p>
                    <p class="otherInformation"><i class="icon ion-calendar"></i> {{event.period}}</p>
                </a>
            </ion-list>
        </div>
        <div ng-show="emptyActivities()" class="udlapp-emptylist">
            <p><i class="ion-archive" ></i><br />
                <span>{{rb.ag_list_noactivities}}</span>
            </p>
        </div>
        <div class="calendarSeparator"> <i class="icon ion-calendar"></i> {{rb.ag_list_agendaTitle}}</div>


        <div>
            <div ng-hide="emptyAgenda()" >
                <ion-list can-swipe="true" show-delete="false" ng-repeat="(key, value) in agendaList | groupBy: 'eventDayStamp'  | orderBy: 'eventDayStamp' : false " class="calendarList"> 

                    <div ng-show="value[0]" class="dateText btn_{{value[0].dayOfWeek}}">
                        <span class="icon ion-stop"></span>
                        <span class="dayOfWeek">{{rb['ag_weekday_' + value[0].dayOfWeek]}}</span> <span class="dayMonth">{{value[0].dayOfMonth}} {{rb['ag_month_' + value[0].month]}} </span> 
                    </div>

                    <ion-item  class="item udlapp-item item-complex agendaItem btn_{{value[0].dayOfWeek}} item-thumbnail-right" ng-repeat="agendaItem in value | orderBy: 'hour'  : false" href="#/app/agendaevents/{{agendaItem._id}}">
                        <div class="agendaItemDescription">
                            <p class="title">{{agendaItem.title}}</p>
                            <p class="secondaryInformation"><i class="icon ion-location"></i> {{agendaItem.location}}</p>
                            <p class="secondaryInformation"><i class="icon ion-clock"></i> {{agendaItem.hour}}</p>
                        </div>

                    </ion-item>

                </ion-list>
            </div>
            <div ng-show="emptyAgenda()" class="udlapp-emptylist">
                <p><i class="ion-archive" ></i><br />
                    <span>{{rb.ag_list_noagenda}}</span>
                </p>
            </div>
        </div>
    </ion-content> 
</ion-view>


